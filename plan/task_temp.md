# Agent/Manager 機能実装タスク

## 通信ルール

AgentとManager間のWebSocket通信は、以下のルールに従う。

1.  **プル型通信（通常データ）**
    *   CPU使用率やメモリ使用量などの動的なシステムメトリクスは、常にManager側からの要求によって開始される。
    *   **フロー:** Managerが要求 (`getMetrics`) → Agentが応答（`metricsData`）。
    *   Agentは、Managerから要求がない限り、これらのデータを自発的に送信しない。

2.  **プッシュ型通信（例外的な通知）**
    *   サーバーのクラッシュやセキュリティアラートなど、緊急性や重要性の高いイベントは、AgentからManagerへ自発的に通知（プッシュ）することができる。
    *   これは例外的な通信であり、通常のステータス更新には使用しない。

## UI目標

物理サーバー（Agent）管理機能に関するUIの目標は以下の通り。

### 画面遷移
-   物理サーバー一覧画面で、各サーバー要素をクリックすると、そのサーバーの詳細画面に遷移する。
-   「物理サーバー追加」ボタンを押すと、新しいサーバー設定用の詳細画面に遷移する。

### 物理サーバー詳細画面
-   **タブ:** 「ステータス」「設定」「システムログ」の3つのタブを設ける。

-   **「ステータス」タブ:**
    -   Agentの接続状態（接続済み, 切断など）
    -   システム全体のメトリクス（CPU使用率, RAM使用率, ディスク使用量, ネットワーク速度）
    -   管理下のゲームサーバー概要（稼働数, 停止数, 合計プレイヤー数）
    -   OS、合計RAM、CPUモデルなどの静的システム情報
    -   管理者用の自由記述メモ欄

-   **「設定」タブ:**
    -   **サーバーエイリアス:** 人間が識別しやすい名前。
    -   **サーバーIP:** 接続先のIPアドレス。
    -   **ポート番号:** Agentが待ち受けるポート。
    -   **接続確認:** Agentへの接続が確立されるまで、他の設定項目は編集不可にする。
    -   **ディレクトリパス:** Agentが管理するディレクトリのパス。アクセス権の有無も表示する。
    -   **削除ボタン:** Managerの管理リストから当該サーバーを削除する（確認ダイアログ付き）。
